ALL_TOOLCHAINS := glibc

include $(NACL_SDK_ROOT)/tools/common.mk


TARGET = player_chrome
DEPS = ppapi_simple nacl_io
LIBS = ppapi_simple nacl_io ppapi ppapi_cpp pthread
ifeq ($(TOOLCHAIN),newlib)
LIBS+= glibc-compat
endif
LIBS+= ev upump_ev
LIBS+= upipe_nacl upipe_pthread upipe_ts upipe_framers upipe_swr upipe_sws upipe_av upipe_filters upipe_modules upipe 
LIBS+= upipe_amt amt
LIBS+= swresample swscale avformat avcodec avutil
LIBS+= vorbisenc vorbisfile vorbis mp3lame theoraenc theoradec theora ogg
LIBS+= rt
CFLAGS =-Wall -Werror -Wno-unused-function -Wno-unused-label -Wno-unused-variable -std=gnu99

SOURCES = player_chrome.c

# Build rules generated by macros from common.mk:

$(foreach dep,$(DEPS),$(eval $(call DEPEND_RULE,$(dep))))
$(foreach src,$(SOURCES),$(eval $(call COMPILE_RULE,$(src),$(CFLAGS))))

ifeq ($(CONFIG),Release)
$(eval $(call LINK_RULE,$(TARGET)_unstripped,$(SOURCES),$(LIBS),$(DEPS),$(LDFLAGS)))
$(eval $(call STRIP_RULE,$(TARGET),$(TARGET)_unstripped))
else
$(eval $(call LINK_RULE,$(TARGET),$(SOURCES),$(LIBS),$(DEPS)))
endif

$(eval $(call NMF_RULE,$(TARGET),))
